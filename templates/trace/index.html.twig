{% extends 'base.html.twig' %}

    {% block header %}
        {% include "_menu.html.twig" %}
    {% endblock %}

{% block body %}
    <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{{ path('app_dashboard') }}">Tableau de bord</a></li>
            <li class="breadcrumb-item active" aria-current="page">Bibliothèque de traces</li>
        </ol>
    </nav>

    <div class="container traces">
        <div class="row" style="display: flex">
            <h1 style="width: fit-content;">Bibliothèque de traces</h1>
            <a style="width: fit-content;">
                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
                    <i class="fa-solid fa-circle-plus"></i>
                </button>
            </a>
        </div>
        <div class="row">
            <div class="accordion accordion-flush col-12" id="accordionFlushExample">
                <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingOne">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#flush-collapseOne" aria-expanded="false"
                                aria-controls="flush-collapseOne">
                            Filtrer par compétences
                        </button>
                    </h2>
                    <div id="flush-collapseOne" class="accordion-collapse collapse" aria-labelledby="flush-headingOne"
                         data-bs-parent="#accordionFlushExample">
                        <div class="accordion-body row">
                            <div>
                                <h6>Compétences</h6>
                                <fieldset>
                                    <div style="display: flex" class="form-check">
                                        <input type="checkbox" id="reset" name="reset"
                                               value="reset"
                                               class="form-check-input" {{ stimulus_action('tracesFiltres', 'filtreCompetences') }}>
                                        <label for="reset" style="margin-left: 10px"
                                               class="form-check-label">Toutes les compétences</label><br>
                                    </div>
                                    {% for competenceChoice in competences %}
                                        <div style="display: flex" class="form-check">
                                            <input type="checkbox" id="{{ competenceChoice.id }}" name="{{ competenceChoice.id }}"
                                                   value="{{ competenceChoice.id }}"
                                                   class="form-check-input" {{ stimulus_action('tracesFiltres', 'filtreCompetences') }} {% if competence != null and competence.id == competenceChoice.id %}checked{% endif %}>
                                            <label for="{{ competenceChoice.id }}" style="margin-left: 10px"
                                                   class="form-check-label">{{ competenceChoice.libelle }}</label><br>
                                        </div>
                                    {% endfor %}
                                </fieldset>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal -->
        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 class="modal-title" id="exampleModalLabel">Types de traces</h3>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <ul>
                            {% for trace in typesTraces %}
                                <li>
                                    <a href="{{ path('app_trace_new', {'id': constant('class', trace)}) }}"><i
                                                class="{{ constant('ICON', trace) }}"></i>{{ trace.display }}</a>
                                </li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        {{ component('all_trace') }}

    </div>

{% endblock %}
